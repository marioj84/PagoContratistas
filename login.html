<script>
    let usuarios = {};

    // Cargar los usuarios y contraseñas desde el archivo JSON
    function loadUsuarios() {
        fetch('https://marioj84.github.io/PagoContratistas/usuarios.json')  // Cambia la URL si es necesario
        .then(response => response.json())
        .then(data => {
            usuarios = data;
            console.log("Usuarios cargados:", usuarios);  // Verificar que los usuarios se carguen correctamente
        })
        .catch(error => {
            console.error("Error al cargar usuarios:", error);
        });
    }

    // Función para el login
    function login() {
        const username = document.getElementById('username').value.trim().toLowerCase();  // Convertir a minúsculas y eliminar espacios
        const password = document.getElementById('password').value.trim();

        console.log("Usuario ingresado:", username);
        console.log("Contraseña ingresada:", password);

        // Verificar usuario y contraseña
        if (usuarios[username] && usuarios[username] === password) {
            console.log("Inicio de sesión exitoso para:", username);
            localStorage.setItem('loggedInUser', username);  // Guardar el usuario logueado
            window.location.href = "index.html";  // Redirigir al formulario de carga de OT
        } else {
            console.log("Usuario o contraseña incorrectos");
            document.getElementById('login-error').style.display = 'block';  // Mostrar mensaje de error
        }
    }

    // Cargar usuarios al iniciar la página
    document.addEventListener('DOMContentLoaded', loadUsuarios);
</script>
