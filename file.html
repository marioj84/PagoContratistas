<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario con Firebase</title>
    <!-- Firebase App (Necesario para Firebase) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
</head>
<body>
    <h2>Formulario de Registro</h2>
    <form id="registroForm">
        <label for="nombre">Nombre:</label><br>
        <input type="text" id="nombre" name="nombre" required><br><br>
        
        <label for="apellido">Apellido:</label><br>
        <input type="text" id="apellido" name="apellido" required><br><br>
        
        <button type="submit">Enviar</button>
    </form>

    <p id="mensaje"></p>

    <script>
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAtXhHrY8EKzmE_yo0rA18rvzKZXyoZFGs",
  authDomain: "pagocontratistas.firebaseapp.com",
  databaseURL: "https://pagocontratistas-default-rtdb.firebaseio.com",
  projectId: "pagocontratistas",
  storageBucket: "pagocontratistas.appspot.com",
  messagingSenderId: "87829393195",
  appId: "1:87829393195:web:49d8001bd917a227ef5f6e",
  measurementId: "G-G4EXPVJNM5"
};
        };

        // Inicializar Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Referencia al formulario
        const form = document.getElementById('registroForm');
        const mensaje = document.getElementById('mensaje');

        form.addEventListener('submit', (e) => {
            e.preventDefault(); // Evita que el formulario se recargue

            // Obtener valores del formulario
            const nombre = document.getElementById('nombre').value;
            const apellido = document.getElementById('apellido').value;

            // Agregar datos a Firestore
            db.collection("usuarios").add({
                nombre: nombre,
                apellido: apellido,
                fecha: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then((docRef) => {
                mensaje.style.color = "green";
                mensaje.textContent = "Datos enviados correctamente. ID: " + docRef.id;
                form.reset(); // Reiniciar el formulario
            })
            .catch((error) => {
                mensaje.style.color = "red";
                mensaje.textContent = "Error al enviar los datos: " + error;
            });
        });
    </script>
</body>
</html>
